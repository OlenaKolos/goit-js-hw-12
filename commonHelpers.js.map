{"version":3,"file":"commonHelpers.js","sources":["../src/img/alert.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__0a4fe6ce__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport alertImg from '/img/alert.svg';\n\nconst url = 'https://pixabay.com/api/';\nconst searchParams = {\n  key: '41933677-6eee14a43ac3f23b8d77fa6f0',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 18,\n};\n\nconst form = document.querySelector('.form');\nconst searchTerm = document.querySelector('.searchTerm');\nconst searchPhotosBtn = document.querySelector('.search-btn');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\n\nconst simpleGallery = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.8,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nif (form) {\n  form.addEventListener('submit', event => {\n    event.preventDefault();\n    if (searchTerm.value.trim().length < 3) {\n      showAlert('Please, enter search term!');\n      return;\n    }\n    fetchPhotos()\n      .then(photos => renderPhotos(photos))\n      .catch(error => showAlert(error.toString()));\n  });\n} else {\n  console.error('Element with class .form not found');\n}\n\nfunction fetchPhotos() {\n  gallery.textContent = '';\n  showLoader(true);\n  searchParams.q = searchTerm.value.trim();\n  const searchParamsString = new URLSearchParams(searchParams);\n  return fetch(`${url}?${searchParamsString}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    try {\n      return response.json();\n    } catch (error) {\n      throw new Error('Failed to parse JSON');\n    }\n  });\n}\n\nfunction renderPhotos(photos) {\n  if (photos.total === 0) {\n    showAlert(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    showLoader(false);\n    return;\n  }\n  const markup = photos.hits\n    .map(photo => {\n      return `<a class=\"gallery-link\" href=\"${photo.largeImageURL}\"><span class=\"gallery-item\"><img class=\"gallery-image\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\" title=\"${photo.tags}\" /></span>\n            <span class=\"img-stat\">\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Likes</span><span class=\"img-stat-val\">${photo.likes}</span></span>\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Views</span><span class=\"img-stat-val\">${photo.views}</span></span>\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Comments</span><span class=\"img-stat-val\">${photo.comments}</span></span>\n            <span class=\"img-stat-item\"><span class=\"img-stat-title\">Downloads</span><span class=\"img-stat-val\">${photo.downloads}</span></span>\n            </span>\n            </a>`;\n    })\n    .join('');\n  showLoader(false);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  simpleGallery.refresh();\n}\n\nfunction showLoader(state = true) {\n  loader.style.display = !state ? 'none' : 'inline-block';\n  searchPhotosBtn.disabled = state;\n}\n\nfunction showAlert(msg) {\n  iziToast.show({\n    position: 'center',\n    iconUrl: alertImg,\n    messageColor: '#FAFAFB',\n    messageSize: '16px',\n    backgroundColor: '#EF4040',\n    close: false,\n    closeOnClick: true,\n    message: msg,\n  });\n}\n"],"names":["alertImg","url","searchParams","form","searchTerm","searchPhotosBtn","loader","gallery","simpleGallery","SimpleLightbox","event","showAlert","fetchPhotos","photos","renderPhotos","error","showLoader","searchParamsString","response","markup","photo","state","msg","iziToast"],"mappings":"6vBAAA,MAAeA,EAAA,2CCMTC,EAAM,2BACNC,EAAe,CACnB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACZ,EAEMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAkB,SAAS,cAAc,aAAa,EACtDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAgB,IAAIC,EAAe,aAAc,CACrD,eAAgB,GAChB,aAAc,MACd,aAAc,GAChB,CAAC,EAEGN,EACFA,EAAK,iBAAiB,SAAUO,GAAS,CAEvC,GADAA,EAAM,eAAc,EAChBN,EAAW,MAAM,KAAI,EAAG,OAAS,EAAG,CACtCO,EAAU,4BAA4B,EACtC,MACD,CACDC,EAAa,EACV,KAAKC,GAAUC,EAAaD,CAAM,CAAC,EACnC,MAAME,GAASJ,EAAUI,EAAM,SAAQ,CAAE,CAAC,CACjD,CAAG,EAED,QAAQ,MAAM,oCAAoC,EAGpD,SAASH,GAAc,CACrBL,EAAQ,YAAc,GACtBS,EAAW,EAAI,EACfd,EAAa,EAAIE,EAAW,MAAM,KAAI,EACtC,MAAMa,EAAqB,IAAI,gBAAgBf,CAAY,EAC3D,OAAO,MAAM,GAAGD,KAAOgB,GAAoB,EAAE,KAAKC,GAAY,CAC5D,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,GAAI,CACF,OAAOA,EAAS,MACjB,MAAC,CACA,MAAM,IAAI,MAAM,sBAAsB,CACvC,CACL,CAAG,CACH,CAEA,SAASJ,EAAaD,EAAQ,CAC5B,GAAIA,EAAO,QAAU,EAAG,CACtBF,EACE,0EACN,EACIK,EAAW,EAAK,EAChB,MACD,CACD,MAAMG,EAASN,EAAO,KACnB,IAAIO,GACI,iCAAiCA,EAAM,6EAA6EA,EAAM,sBAAsBA,EAAM,gBAAgBA,EAAM;AAAA;AAAA,8GAE3EA,EAAM;AAAA,8GACNA,EAAM;AAAA,iHACHA,EAAM;AAAA,kHACLA,EAAM;AAAA;AAAA,iBAGnH,EACA,KAAK,EAAE,EACVJ,EAAW,EAAK,EAChBT,EAAQ,mBAAmB,YAAaY,CAAM,EAC9CX,EAAc,QAAO,CACvB,CAEA,SAASQ,EAAWK,EAAQ,GAAM,CAChCf,EAAO,MAAM,QAAWe,EAAiB,eAAT,OAChChB,EAAgB,SAAWgB,CAC7B,CAEA,SAASV,EAAUW,EAAK,CACtBC,EAAS,KAAK,CACZ,SAAU,SACV,QAASvB,EACT,aAAc,UACd,YAAa,OACb,gBAAiB,UACjB,MAAO,GACP,aAAc,GACd,QAASsB,CACb,CAAG,CACH"}